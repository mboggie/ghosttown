<!DOCTYPE html>
<html>
<head>
	<title>Covid Ghost Town</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--Twitter card-->
	<meta name="twitter:card" content="summary_large_image" />
	<!--OG tags-->
	<meta property="og:url" content="http://covidghosttown.com" />
	<meta property="og:title" content="Covid, USA" />
	<meta property="og:description" content="If COVID-19 had struck all in just one American city, which would have disappeared?" />
	<meta property="og:image" content="" />

	<script type="text/javascript">

		function loadCity() {
			let cities = [];
			let ghosttown = "";
			let rank = 0;
			let pop = 0;
			window.fetch('cities.json')
			.then(response => response.json())
			.then(function(data){cities = data;
				console.log(cities);
				let deaths = 0;
				window.fetch('https://api.covid19api.com/summary', {headers:{'Content-Type': 'application/json'}})
				.then(response => response.json())
				.then(function(json){
					c = json["Countries"];
					c.forEach(function(country){
						if(country.CountryCode == "US"){
							deaths = country.TotalDeaths;
						}
					});
					for (i=2; i < cities.length; i++){
						if ((cities[i].pop < deaths) && rank == 0){
							rank = cities[i].number;
							ghosttown = cities[i].city;
							pop = cities[i].pop;
							st = cities[i].state;
						};
					};
					console.log(pop);
					document.getElementById("number").innerHTML = deaths;
					document.getElementById("town").innerHTML = ghosttown;
					document.getElementById("st").innerHTML = st;
					//document.getElementById("rank").innerHTML = rank;
					document.getElementById("12345").innerHTML = pop;
				});
			});
		}
	</script>
	<link rel="stylesheet" type="text/css" href="reset.css">
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body onload="loadCity();">
		<h1 id="title">Covid Ghost Town</h1>
		<div id="wrapper">
			<div id="display"><p>Since the first recorded death in the U.S. on February 6 2020, <span id="number">[ gathering data ]</span> Americans have died from Covid-19. </p>
				<p>It&rsquo;s as though <span id="town">city</span>, <span id="st">st</span> saw all <span id="12345">0</span> people who live there disappear.</p></div>
		</div>
		<div id="footer"><a href="http://www.twitter.com/mattboggie">@mattboggie</a></div>
</body>
</html>